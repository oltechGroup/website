import { Canvas } from "@react-three/fiber";
import { Environment, Loader, ScrollControls, useProgress } from "@react-three/drei";
import Skeleton from "../models/Skeleton";
import Header from "../common/Header";
import { Suspense, useEffect, useState } from "react";
import Labels from "../models/Labels";
import "./Products.css";

function Products() {
  const [loading, setLoading] = useState(true);
  const { progress } = useProgress();
  
  useEffect(() => {
    document.addEventListener("scroll", () => {
      if (window.pageYOffset > 500) {
        setNormalHeader(true);
      } else {
        setNormalHeader(false);
      }
    });
  }, []);
  
  return (
    <section className="section-products d-none">
      <Header transparent />
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="962"
        height="401"
        viewBox="0 0 962 401"
        fill="none"
        className="canvas__svg"
        id="canvasSvg"
      >
        <path
          d="M166.409 60.75C163.576 56.0833 159.659 52.5 154.659 50C149.826 47.5 144.076 46.25 137.409 46.25C125.076 46.25 115.326 50.25 108.159 58.25C101.159 66.25 97.6592 77 97.6592 90.5C97.6592 105.667 101.409 117.25 108.909 125.25C116.576 133.083 127.659 137 142.159 137C159.326 137 171.576 129.25 178.909 113.75H129.659V78.5H221.159V126C217.326 135.333 211.659 144.083 204.159 152.25C196.826 160.417 187.493 167.167 176.159 172.5C164.826 177.667 151.909 180.25 137.409 180.25C119.743 180.25 104.076 176.5 90.4092 169C76.9092 161.333 66.4092 150.75 58.9092 137.25C51.5759 123.583 47.9092 108 47.9092 90.5C47.9092 73.1667 51.5759 57.75 58.9092 44.25C66.4092 30.5833 76.9092 20 90.4092 12.5C103.909 4.83333 119.493 0.999995 137.159 0.999995C159.326 0.999995 177.659 6.33333 192.159 17C206.659 27.6667 215.659 42.25 219.159 60.75H166.409ZM332.368 179L297.368 114H292.118V179H243.118V2.74999H320.368C334.535 2.74999 346.535 5.24999 356.368 10.25C366.202 15.0833 373.618 21.8333 378.618 30.5C383.618 39 386.118 48.5833 386.118 59.25C386.118 71.25 382.785 81.8333 376.118 91C369.618 100 360.035 106.417 347.368 110.25L387.118 179H332.368ZM292.118 80.5H316.368C323.035 80.5 328.035 78.9167 331.368 75.75C334.702 72.5833 336.368 68 336.368 62C336.368 56.3333 334.618 51.9167 331.118 48.75C327.785 45.4167 322.868 43.75 316.368 43.75H292.118V80.5ZM456.401 2.74999V105C456.401 114.5 458.568 121.833 462.901 127C467.401 132.167 474.151 134.75 483.151 134.75C492.151 134.75 498.901 132.167 503.401 127C508.068 121.667 510.401 114.333 510.401 105V2.74999H559.401V105C559.401 121.167 555.985 135 549.151 146.5C542.318 157.833 532.985 166.417 521.151 172.25C509.485 177.917 496.485 180.75 482.151 180.75C467.818 180.75 454.985 177.917 443.651 172.25C432.485 166.417 423.651 157.833 417.151 146.5C410.818 135.167 407.651 121.333 407.651 105V2.74999H456.401ZM725.63 61.5C725.63 72.1667 723.13 81.9167 718.13 90.75C713.297 99.4167 705.88 106.417 695.88 111.75C686.047 116.917 673.963 119.5 659.63 119.5H635.38V179H586.38V2.74999H659.63C673.797 2.74999 685.797 5.24999 695.63 10.25C705.63 15.25 713.13 22.1667 718.13 31C723.13 39.8333 725.63 50 725.63 61.5ZM654.88 80.5C668.713 80.5 675.63 74.1667 675.63 61.5C675.63 48.6667 668.713 42.25 654.88 42.25H635.38V80.5H654.88ZM829.815 180.75C813.315 180.75 798.149 176.917 784.315 169.25C770.482 161.417 759.482 150.667 751.315 137C743.315 123.167 739.315 107.583 739.315 90.25C739.315 72.9167 743.315 57.4167 751.315 43.75C759.482 29.9167 770.482 19.1667 784.315 11.5C798.149 3.83333 813.315 -7.62939e-06 829.815 -7.62939e-06C846.482 -7.62939e-06 861.649 3.83333 875.315 11.5C889.149 19.1667 900.065 29.9167 908.065 43.75C916.065 57.4167 920.065 72.9167 920.065 90.25C920.065 107.583 916.065 123.167 908.065 137C900.065 150.667 889.149 161.417 875.315 169.25C861.482 176.917 846.315 180.75 829.815 180.75ZM829.815 135.25C842.315 135.25 852.149 131.167 859.315 123C866.649 114.833 870.315 103.917 870.315 90.25C870.315 76.25 866.649 65.25 859.315 57.25C852.149 49.0833 842.315 45 829.815 45C817.149 45 807.232 49.0833 800.065 57.25C792.899 65.25 789.315 76.25 789.315 90.25C789.315 104.083 792.899 115.083 800.065 123.25C807.232 131.25 817.149 135.25 829.815 135.25ZM91.168 400.75C74.668 400.75 59.5013 396.917 45.668 389.25C31.8347 381.417 20.8347 370.667 12.668 357C4.66797 343.167 0.667969 327.583 0.667969 310.25C0.667969 292.917 4.66797 277.417 12.668 263.75C20.8347 249.917 31.8347 239.167 45.668 231.5C59.5013 223.833 74.668 220 91.168 220C107.835 220 123.001 223.833 136.668 231.5C150.501 239.167 161.418 249.917 169.418 263.75C177.418 277.417 181.418 292.917 181.418 310.25C181.418 327.583 177.418 343.167 169.418 357C161.418 370.667 150.501 381.417 136.668 389.25C122.835 396.917 107.668 400.75 91.168 400.75ZM91.168 355.25C103.668 355.25 113.501 351.167 120.668 343C128.001 334.833 131.668 323.917 131.668 310.25C131.668 296.25 128.001 285.25 120.668 277.25C113.501 269.083 103.668 265 91.168 265C78.5013 265 68.5847 269.083 61.418 277.25C54.2513 285.25 50.668 296.25 50.668 310.25C50.668 324.083 54.2513 335.083 61.418 343.25C68.5847 351.25 78.5013 355.25 91.168 355.25ZM252.445 361.5H307.195V399H203.445V222.75H252.445V361.5ZM458.998 222.75V261.75H411.998V399H362.998V261.75H316.498V222.75H458.998ZM526.127 262V290.75H582.377V328H526.127V359.75H589.877V399H477.127V222.75H589.877V262H526.127ZM608.09 310.5C608.09 293.167 611.673 277.75 618.84 264.25C626.173 250.583 636.507 240 649.84 232.5C663.173 224.833 678.507 221 695.84 221C717.84 221 736.34 226.917 751.34 238.75C766.34 250.417 776.007 266.333 780.34 286.5H727.59C724.423 279.833 720.007 274.75 714.34 271.25C708.84 267.75 702.423 266 695.09 266C683.757 266 674.673 270.083 667.84 278.25C661.173 286.25 657.84 297 657.84 310.5C657.84 324.167 661.173 335.083 667.84 343.25C674.673 351.25 683.757 355.25 695.09 355.25C702.423 355.25 708.84 353.5 714.34 350C720.007 346.5 724.423 341.417 727.59 334.75H780.34C776.007 354.917 766.34 370.917 751.34 382.75C736.34 394.417 717.84 400.25 695.84 400.25C678.507 400.25 663.173 396.5 649.84 389C636.507 381.333 626.173 370.75 618.84 357.25C611.673 343.583 608.09 328 608.09 310.5ZM961.293 222.75V399H912.293V328.25H852.543V399H803.543V222.75H852.543V289H912.293V222.75H961.293Z"
          fill="black"
          fillOpacity="0.07"
        />
      </svg>

      <div className="section-products__canva">
      <Labels />
        <Canvas camera={{ fov: 60 }}>
          <Suspense fallback={null}>
            <ScrollControls pages={9} damping={0.5}>
              <Environment preset="warehouse" />
              <Skeleton position={[0, 0, 2]} />
            </ScrollControls>
          </Suspense>
        </Canvas>
        <Loader />
      </div>
    </section>
  );
}

export default Products;
